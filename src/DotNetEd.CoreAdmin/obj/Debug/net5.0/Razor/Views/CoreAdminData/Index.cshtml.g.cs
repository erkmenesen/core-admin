#pragma checksum "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b20a3f5c53e486c0d5334bd36d47fe5828dee3db"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_CoreAdminData_Index), @"mvc.1.0.view", @"/Views/CoreAdminData/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml"
using DotNetEd.CoreAdmin;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml"
using NonFactors.Mvc.Grid;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml"
using System.Linq.Expressions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml"
using Microsoft.EntityFrameworkCore;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b20a3f5c53e486c0d5334bd36d47fe5828dee3db", @"/Views/CoreAdminData/Index.cshtml")]
    #nullable restore
    public class Views_CoreAdminData_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<DotNetEd.CoreAdmin.ViewModels.DataListViewModel>
    #nullable disable
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
#nullable restore
#line 7 "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml"
  
    ViewData["Page_Title"] = Model.DbSetProperty.Name;
    Layout = "_CoreAdminLayout";

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<h1 class=\"display-4\">");
#nullable restore
#line 12 "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml"
                 Write(Model.DbSetProperty.Name);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h1>\r\n\r\n<div class=\"row\">\r\n    <div class=\"col-lg-12 my-3\">\r\n        ");
#nullable restore
#line 16 "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml"
   Write(Html.ActionLink("Create new", "Create", new { id = Model.DbSetProperty.Name }, new { @class = "btn btn-primary"}));

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n    </div>\r\n</div>\r\n\r\n");
#nullable restore
#line 20 "C:\Users\Selin\Desktop\core-admin-0ec10402fd4cac57e3f44602668af41a87aa4db6\src\DotNetEd.CoreAdmin\Views\CoreAdminData\Index.cshtml"
Write(Html
    .Grid(Model.Data)
    .Build((columns) => {

        foreach(var entityProperty in Model.EntityType.GetProperties())
        {


            ParameterExpression entity = Expression.Parameter(typeof(object), "ent");
            var changedType = Expression.Convert(entity, Model.EntityType);
            var property = Expression.Property(changedType, entityProperty.Name);

            if (entityProperty.PropertyType == typeof(Guid))
            {
                var lambda = Expression.Lambda<Func<object,Guid>>(property, entity);

                columns.Add(lambda).Titled(entityProperty.Name);
            }
            else if (entityProperty.PropertyType == typeof(string))
            {
                var lambda = Expression.Lambda<Func<object,string>>(property, entity);

                columns.Add(lambda).Titled(entityProperty.Name);
            }
            else if (entityProperty.PropertyType == typeof(Int32))
            {
                var lambda = Expression.Lambda<Func<object,Int32>>(property, entity);

                columns.Add(lambda).Titled(entityProperty.Name);
            }
            else if (entityProperty.PropertyType == typeof(DateTime))
            {
                var lambda = Expression.Lambda<Func<object,DateTime>>(property, entity);

                columns.Add(lambda).Titled(entityProperty.Name);
            }
            else if (entityProperty.PropertyType == typeof(double))
            {
                var lambda = Expression.Lambda<Func<object, double>>(property, entity);

                columns.Add(lambda).Titled(entityProperty.Name);
            }
            else if (entityProperty.PropertyType == typeof(byte[]))
            {
                var lambda = Expression.Lambda<Func<object, byte[]>>(property, entity);

                columns.Add(lambda).Titled(entityProperty.Name)
                    .RenderedAs((value) => {
                        var base64 = ImageUtils.WebBase64EncodeImageByteArrayOrNull(lambda.Compile().Invoke(value));
                        return base64 == null ? string.Empty : $"<img height='48' src='{base64}'>";
                    } ).Encoded(false);
            }
        }

        // only supports single PKs, not composite ones
        var pkProperties = Model.DbContext.Model.FindEntityType(Model.EntityType).FindPrimaryKey().Properties;
        if (pkProperties.Count == 1)
        {
            var pKProperty = pkProperties.Single()?.PropertyInfo;

            if (pKProperty != null)
            {
                columns.Add(item => Html.ActionLink("Delete", "DeleteEntity", new { dbSetName = Model.DbSetProperty.Name, Id = pKProperty.GetValue(item)}));
                columns.Add(item => Html.ActionLink("Edit", "EditEntity", new { dbSetName = Model.DbSetProperty.Name, Id = pKProperty.GetValue(item) }));
            }
        }


    }

        )
    .Using(GridFilterMode.Header)
    .Empty("No data found")
    .Filterable()
    .Sortable()
    .Pageable()
);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n");
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n     <script>\r\n           document.querySelectorAll(\".mvc-grid\").forEach(element => new MvcGrid(element));\r\n        </script>\r\n");
            }
            );
            WriteLiteral("\r\n\r\n");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<DotNetEd.CoreAdmin.ViewModels.DataListViewModel> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
